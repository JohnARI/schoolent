
{% extends 'base.html.twig' %}

{% block title %}
Dashboard admin
{% endblock %}

{% block body %}

{# Page #}
<div class="page">
    <div class="page-main">
        {# app-content open #}
        <div class="main-content app-content mt-0">
            <div class="side-app">

                {# Container #}
                <div class="main-container container-fluid">
                    
                    {# Header #}
                    <div class="page-header">
                        <h1 class="page-title">Administration</h1>
                        <div>
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="#">Home</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Dashboard 01</li>
                            </ol>
                        </div>
                    </div>
                    {# Fin header #}

                    {# Profil #}
                    <div class="row" id="user-profile">
                        <div class="col-lg-12">
                            <div class="card">
                                <div class="card-body">
                                    <div class="wideget-user mb-2">
                                        <div class="row">
                                            <div class="col-lg-12 col-md-12">
                                                <div class="row">
                                                    <div class="panel profile-cover">
                                                        <div class="profile-cover__action bg-img">
                                                        </div>
                                                        <div class="profile-cover__img">
                                                            <div class="profile-img-1">
                                                            {% if app.user.picture %}
                                                                <img style="height:100px;width:100px;" src="{{ asset('uploads/user/' ~ app.user.picture)}}" alt="avatar">
                                                            {% elseif app.user.sexe == 0 %}
                                                                <img style="height:100px;width:100px;" src="{{ asset('uploads/avatar/avatarMen.png')}}" alt="avatar">
                                                            {% elseif app.user.sexe == 1 %}
                                                                <img style="height:100px;width:100px;" src="{{ asset('uploads/avatar/avatarWoman.png')}}" alt="avatar">
                                                            {% endif %}  
                                                            </div>
                                                            <div class="profile-img-content text-dark text-start">
                                                                <div class="text-dark">
                                                                    <h3 class="h3 mb-2">{{app.user.firstname ~ ' ' ~ app.user.lastname}}</h3>
                                                                    <h5 class="text-muted">{{app.user.role}}</h5>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="">
                                                        <div class="social social-profile-buttons mt-5 float-end">
                                                            <div class="mt-3">
                                                              
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            {# Fin profil #}

                            {# Tableaux et modal #}
                    <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xl-12">
                                <div class="row">
                                    <div class="col-lg-6 col-md-12 col-sm-12 col-xl-3">
                                        <div class="card overflow-hidden">
                                            <div class="card-body">
                                                <div class="d-flex align-items-center">
                                                    <div class="mt-2 me-4">
                                                        <h6 class="">Etudiants</h6>
                                                        <h2 class="mb-0 number-font">{{ students | length }}</h2>
                                                    </div>
                                                    <div class="d-flex">
                                                        <div>
                                                            <h6 class="me-4">Homme</h6>
                                                            
                                                            <h4 class="mb-0 number-font">{{ studentsMan | length }}</h4>
                                                        </div>
                                                        <div>
                                                            <h6 class="me-4">Femme</h6>
                                                            <h4 class="mb-0 number-font">{{ studentsWoman | length }}</h4>
                                                        </div>
                                                    </div>
                                                    <div class="ms-auto">
                                                        <div class="chart-wrapper mt-1">
                                                            <canvas id="saleschart" class="h-8 w-9 chart-dropshadow"></canvas>
                                                        </div>
                                                    </div>
                                                </div>
                                                <span class="text-muted fs-13"><i class="fa fa-users  text-secondary"></i>
                                                    {% embed "components/modal.html.twig" %}
                                                    {% set modalType = "modal-xl effect-flip-verticalshow" %}
                                                    {% set id = "full-students" %}
                                                    {% block button %}<button href="" class="text-secondary" data-bs-toggle="modal" data-bs-target="#{{id}}">Voir tous les étudiants</button>{% endblock %}
                                                    {% block modalTitle %}Tous les étudiants{% endblock %}
                                                    {% block dashboard %}{% include "/administration/admin/view/view_students.html.twig" %}
                                                    {% endblock %}
                                                    {% endembed %}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-12 col-sm-12 col-xl-3">
                                        <div class="card overflow-hidden">
                                            <div class="card-body">
                                                <div class="d-flex">
                                                    <div class="mt-2">
                                                        <h6 class="">Formateurs</h6>
                                                        <h2 class="mb-0 number-font">{{ teachers | length }} </h2>
                                                    </div>
                                                    <div class="ms-auto">
                                                        <div class="chart-wrapper mt-1">
                                                            <canvas id="leadschart" class="h-8 w-9 chart-dropshadow"></canvas>
                                                        </div>
                                                    </div>
                                                </div>
                                                <span class="text-muted fs-13"><i class="fa fa-user text-pink"></i>
                                                {% embed "components/modal.html.twig" %}
                                                    {% set modalType = "modal-xl" %}
                                                    {% set id = "full-teacher" %}
                                                    {% block button %}<button href="" class="text-pink" data-bs-toggle="modal" data-bs-target="#{{id}}">Voir tous les formateurs</button>{% endblock %}
                                                    {% block buttonTitle %}{% endblock %}
                                                    {% block modalTitle %}Tous les formateurs{% endblock %}
                                                    {% block dashboard %}{% include "/administration/admin/view/view_teachers.html.twig" %}{% endblock %}
                                                    {% endembed %}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-12 col-sm-12 col-xl-3">
                                        <div class="card overflow-hidden">
                                            <div class="card-body">
                                                <div class="d-flex">
                                                    <div class="mt-2">
                                                        <h6 class="">Administrateurs</h6>
                                                        <h2 class="mb-0 number-font">{{ admins | length }}</h2>
                                                    </div>
                                                    <div class="ms-auto">
                                                        <div class="chart-wrapper mt-1">
                                                            <canvas id="profitchart" class="h-8 w-9 chart-dropshadow"></canvas>
                                                        </div>
                                                    </div>
                                                </div>
                                                <span class="text-muted fs-13"><i class="fa fa-user text-green"></i>
                                                {% embed "components/modal.html.twig" %}
                                                    {% set modalType = "modal-xl" %}
                                                    {% set id = "full-admin" %}
                                                    {% block button %}<button href="" class="text-green" data-bs-toggle="modal" data-bs-target="#{{id}}">Voir tous les admins</button>{% endblock %}
                                                    {% block buttonTitle %}{% endblock %}
                                                    {% block modalTitle %}Tous les administrateurs{% endblock %}
                                                    {% block dashboard %}{% include "/administration/admin/view/view_admins.html.twig" %}{% endblock %}
                                                    {% endembed %}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-12 col-sm-12 col-xl-3">
                                        <div class="card overflow-hidden">
                                            <div class="card-body">
                                                <div class="d-flex">
                                                    <div class="mt-2">
                                                        <h6 class="">Sessions</h6>
                                                        <h2 class="mb-0 number-font">{{ sessions | length }}</h2>
                                                    </div>
                                                    <div class="ms-auto">
                                                        <div class="chart-wrapper mt-1">
                                                            <canvas id="costchart" class="h-8 w-9 chart-dropshadow"></canvas>
                                                        </div>
                                                    </div>
                                                </div>
                                                <span class="text-muted fs-13"><i class="fa fa-address-card text-cyan"></i>  {% embed "components/modal.html.twig" %}
                                                    {% set modalType = "modal-xl" %}
                                                    {% set id = "full-session" %}
                                                    {% block button %}<button href="" class="text-cyan" data-bs-toggle="modal" data-bs-target="#{{id}}">Voir toutes les sessions</button>{% endblock %}
                                                    {% block buttonTitle %}{% endblock %}
                                                    {% block modalTitle %}Tous les administrateurs{% endblock %}
                                                    {% block dashboard %}{% include "/administration/admin/view/view_sessions.html.twig" %}{% endblock %}
                                                    {% endembed %}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {# Fin tableaux et modal #}

                    {# Debut Calendrier #}
                    <div class="row">
		<div class="col-md-12">
			<div class="card">
				<div class="card-header">
					<h3 class="card-title">Calender With different Color Events</h3>
				</div>
				<div class="card-body">
					<div class="row">
						<div class="col-md-12 col-xl-3">
							<div id="external-events">
								<h4>Draggable Events</h4>
								<div class="fc-event fc-h-event fc-daygrid-event fc-daygrid-block-event bg-primary">
									<div class="fc-event-main">My Event 1</div>
								</div>
								<div class="fc-event fc-h-event fc-daygrid-event fc-daygrid-block-event bg-secondary" data-class="bg-secondary">
									<div class="fc-event-main">My Event 2</div>
								</div>
								<div class="fc-event fc-h-event fc-daygrid-event fc-daygrid-block-event bg-warning" data-class="bg-warning">
									<div class="fc-event-main">My Event 3</div>
								</div>
								<div class="fc-event fc-h-event fc-daygrid-event fc-daygrid-block-event bg-success" data-class=" bg-info">
									<div class="fc-event-main">My Event 4</div>
								</div>
								<div class="fc-event fc-h-event fc-daygrid-event fc-daygrid-block-event bg-danger" data-class="bg-danger">
									<div class="fc-event-main">My Event 5</div>
								</div>
							</div>
							<div class="mt-5">
								<h4 class="card-title mb-4">My Schedules</h4>
								<div class="card border p-0 pt-3">
									<div class="card-body pt-3">
										<div class="dropdown">
											<a class="nav-link float-end text-muted pe-0 pt-0" href="#" data-bs-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
												<i class="fe fe-more-vertical"></i>
											</a>
											<div class="dropdown-menu dropdown-menu-end">
												<a class="dropdown-item" href="#">
													<i class="fe fe-edit me-1"></i>
													Shedule Date</a>
												<a class="dropdown-item" href="#">
													<i class="fe fe-trash-2 me-1"></i>
													Delete</a>
											</div>
										</div>
										<h5 class="card-title">Design Review</h5>
										<h6 class="card-subtitle mb-2 text-muted">05-09-2022</h6>
										<a href="#" class="btn btn-primary btn-sm me-3">Urgent</a>
										<a href="#" class="btn btn-secondary btn-sm">Face to Face</a>
									</div>
									<div class="card-footer">
										<div class="media media-xs overflow-visible">
											<img class="avatar brround avatar-md me-3" src="../assets/images/users/12.jpg" alt="avatar-img">
											<div class="media-body valign-middle">
												<a href="profile.html" class=" fw-semibold text-dark">John Paige</a><br>
												<a href="profile.html" class="text-muted mb-0">
													View client profile</a>
											</div>
										</div>
									</div>
								</div>
								<div class="card border p-0 pt-3">
									<div class="card-body pt-3">
										<div class="dropdown pe-0 pt-0">
											<a class="nav-link float-end text-muted" href="" data-bs-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
												<i class="fe fe-more-vertical"></i>
											</a>
											<div class="dropdown-menu dropdown-menu-end">
												<a class="dropdown-item" href="#">
													<i class="fe fe-edit me-1"></i>
													Shedule Date</a>
												<a class="dropdown-item" href="#">
													<i class="fe fe-trash-2 me-1"></i>
													Delete</a>
											</div>
										</div>
										<h5 class="card-title">New Project</h5>
										<h6 class="card-subtitle mb-2 text-muted">14-10-2022</h6>
										<a href="#" class="btn btn-primary btn-sm me-3">Urgent</a>
										<a href="#" class="btn btn-danger btn-sm">Online Meeting</a>
									</div>
									<div class="card-footer">
										<div class="media media-xs overflow-visible">
											<img class="avatar brround avatar-md me-3" src="../assets/images/users/16.jpg" alt="avatar-img">
											<div class="media-body valign-middle">
												<a href="profile.html" class=" fw-semibold text-dark">Mozelle Belt</a><br>
												<a href="profile.html" class="text-muted mb-0">
													View client profile</a>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="col-md-12 col-xl-9">
							<div id='calendar2'></div>
						</div>
					</div>
				</div>

			</div>
		</div>
		<div class="col-md-12">
			<div class="card">
				<div class="card-header">
					<h3 class="card-title">List Calendar</h3>
				</div>
				<div class="card-body">
					<div id='calendar2'></div>
				</div>
			</div>
		</div>
	</div>

</body>
                       
                            {# Fin calendrier #}


                        {# Widgets #}
                        <div class="row">   
                            <div class="col-lg-6 col-md-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">Single Bar chart </h3>
                                    </div>
                                    <div class="card-body">
                                        <div id="chart-monthly" class="chartsh"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-6 col-md-12">
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title">Donut Chart</h3>
                                    </div>
                                    <div class="card-body">
                                        <div id="chart-donut" class="chartsh"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>   

                        {# Fin widgets #}

                    
                    </div>
                    {# Fin container #}
            </div>
            {# Fin app-content #}
<script>

window.onload = () => {

document.addEventListener('DOMContentLoaded', function() {
    var containerEl = document.getElementById('external-events');
    new FullCalendar.Draggable(containerEl, {
        itemSelector: '.fc-event',
        eventData: function(eventEl) {
            return {
                title: eventEl.innerText.trim(),
                title: eventEl.innerText,
                className: eventEl.className + ' overflow-hidden '
            }
        }
    });
    var calendarEl = document.getElementById('calendar2');

    var calendar = new FullCalendar.Calendar(calendarEl, {
        headerToolbar: {
            left: 'prev,next today',
            center: 'title',
            right: 'dayGridMonth,timeGridWeek,timeGridDay'
        },

        defaultView: 'month',
        navLinks: true, // can click day/week names to navigate views
        businessHours: true, // display business hours
        editable: true,
        selectable: true,
        selectMirror: true,
        droppable: true, // this allows things to be dropped onto the calendar
        select: function(arg) {
            var title = prompt('Event Tototo:');
            if (title) {
                calendar.addEvent({
                    title: title,
                    start: arg.start,
                    end: arg.end,
                    allDay: arg.allDay
                })
            }
            calendar.unselect()
        },
        eventClick: function(arg) {
            if (confirm('Are you sure you want to delete this event?')) {
                arg.event.remove()
            }
        },
        editable: true,
        dayMaxEvents: true, // allow "more" link when too many events
        events: [{
                title: 'Business Lunch',
                start: '2022-03-03T13:00:00',
                constraint: 'businessHours'
            }, {
                title: 'Meeting',
                start: '2022-03-13T03:00:00',
                constraint: 'availableForMeeting', // defined below
                color: '#f35e90'
            }, {
                title: 'Conference',
                start: '2022-07-18',
                end: '2022-07-20',
                color: '#e67e22'
            }, {
                title: 'Party',
                start: '2022-07-29T20:00:00',
                color: '#22c865'
            },
            // areas where "Meeting" must be dropped
            {
                id: 'availableForMeeting',
                start: '2022-03-03T10:00:00',
                end: '2022-03-03T16:00:00',
                rendering: 'background',
                color: '#5e72e4'
            }, {
                id: 'availableForMeeting',
                start: '2022-03-13T10:00:00',
                end: '2022-03-13T16:00:00',
                rendering: 'background'
            },
            // red areas where no events can be dropped
            {
                start: '2022-03-24',
                end: '2022-03-28',
                overlap: false,
                rendering: 'background',
                color: 'rgba(0,0,0,0.1)'
            }, {
                start: '2022-03-06',
                end: '2022-03-03',
                overlap: false,
                rendering: 'background',
                color: 'rgba(0,0,0,0.1)'
            }
        ]
    })

    calendar.render();
})

}


//List FullCalendar
document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar2');
    var calendar = new FullCalendar.Calendar(calendarEl, {
        height: 'auto',
        headerToolbar: {
            left: 'prev,next today',
            center: 'title',
            right: 'listDay,listWeek'
        },

        // customize the button names,
        // otherwise they'd all just say "list"
        views: {
            listDay: { buttonText: 'list day' },
            listWeek: { buttonText: 'list week' }
        },
        initialView: 'listWeek',
        initialDate: '2022-03-01',
        navLinks: true, // can click day/week names to navigate views
        editable: true,
        eventLimit: true, // allow "more" link when too many events
        dayMaxEvents: true, // allow "more" link when too many events
        events: [{
            title: 'All Day Event',
            start: '2022-03-01'
        }, {
            title: 'Long Event',
            start: '2022-03-07',
            end: '2022-03-10'
        }, {
            id: 999,
            title: 'Repeating Event',
            start: '2022-03-09T16:00:00'
        }, {
            id: 999,
            title: 'Repeating Event',
            start: '2022-03-16T16:00:00'
        }, {
            title: 'Conference',
            start: '2022-03-03',
            end: '2022-03-13'
        }, {
            title: 'Meeting',
            start: '2022-04-12T10:30:00',
            end: '2022-04-12T12:30:00'
        }, {
            title: 'Lunch',
            start: '2022-03-12T12:00:00'
        }, {
            title: 'Meeting',
            start: '2022-03-12T14:30:00'
        }, {
            title: 'Happy Hour',
            start: '2022-03-12T17:30:00'
        }, {
            title: 'Dinner',
            start: '2022-03-12T20:00:00'
        }, {
            title: 'Birthday Party',
            start: '2022-03-13T07:00:00'
        }, {
            title: 'Click for Google',
            url: 'http://google.com/',
            start: '2022-03-28'
        }],


        calendar.render();

    });

    




</script>


                    {% endblock %}