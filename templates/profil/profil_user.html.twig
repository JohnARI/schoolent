{% extends "base.html.twig" %}
{% block title %}Profil de {{user.fullname}}{% endblock %}

{% block body %}
	<div class="main-content app-content mt-0">
		<div
			class="side-app">

			<!-- CONTAINER -->
			<div
				class="main-container container-fluid">

				<!-- PAGE-HEADER -->
				<div class="page-header">
					<h1 class="page-title">Profil de {{user.fullname}}</h1>
					<div>
						<ol class="breadcrumb">
							<li class="breadcrumb-item">
								<a href="{{path('default')}}">Accueil</a>
							</li>
							<li class="breadcrumb-item active" aria-current="page">Profil</li>
						</ol>
					</div>
				</div>
				<!-- PAGE-HEADER END -->

				<!-- ROW-1 OPEN -->
				<div class="row" id="user-profile">
					<div class="col-lg-12">
						<div class="card">
							<div class="card-body mb-8">
								<div class="wideget-user mb-2">
									<div class="row">
										<div class="col-lg-12 col-md-12">
											<div class="row">
												<div class="panel profile-cover">
													<div class="profile-cover__action bg-img"></div>
													<div class="profile-cover__img">
														<div class="profile-img-1">
															{% if user.picture %}

																<img src="{{ asset('uploads/user/' ~ user.picture)}}" alt="image utilisateur">
															{% elseif user.sexe == 0 %}
																<img src="{{ asset('uploads/avatar/avatarMen.png')}}" alt="image utilisateur">
															{% elseif user.sexe == 1 %}
																<img src="{{ asset('uploads/avatar/avatarWomen.png')}}" alt="image utilisateur">
															{% endif %}
														</div>
														<div class="profile-img-content text-dark text-start">
															<div class="text-dark">

																<h3 class="h3 mb-2">{{user.fullname}}</h3>
																<h5 class="text-muted">{{user.role}}</h5>
															</div>
														</div>
													</div>
													<div class="btn-profile">
														{% if user.id == app.user.id %}
															<a href="{{path('profil')}}" class="btn btn-primary mt-1 mb-1">
																<i class="fa fa-rss"></i>
																<span>Modifier le profil</span>
															</a>
														{% elseif user.session == app.user.session and app.user.role == 'Professeur' or 'Administrateur' %}
															{% embed "components/modal.html.twig" %}
																{% set modalType = "modal-lg" %}
																{% set id = "add-grades" %}
																{% block button %}
																	<button class="btn btn-primary mt-1 mb-1" data-bs-toggle="modal" data-bs-target="#{{id}}">
																		<i class="fa fa-rss"></i>
																		<span>Attribuer une note</span>
																	</button>
																{% endblock %}
																{% block modalTitle %}Ajouter une note
																{% endblock %}
																{% block form %}
																	{% embed "administration/admin/add/add_grades.html.twig" %}
																	{% block addUser %}{% endblock %}
																	{% endembed %}
																{% endblock %}
															{% endembed %}

														{% endif %}
														
													</div>
												</div>
											</div>
											
										</div>

									</div>
								</div>
							</div>
						</div>

					</div>
					<!-- COL-END -->
				</div>
				<!-- ROW-1 CLOSED -->


				{% if user.session == app.user.session and app.user.role == 'Professeur' or 'Administrateur' and grade is defined %}
					<div class="row">
						<div class="col-xl-6">
							<div class="card">
								<div class="card-body">

									<div class="table-responsive">
										<table class="table border text-nowrap text-md-nowrap table-bordered mb-0">
											<thead>
												<tr>

													<th>Cours</th>
													<th>Note</th>
													<th>Moyenne</th>
												</tr>
											</thead>
											<tbody>
												{% for grade in grades|sort|reverse %}
													<tr>

														<td>{{grade.category}}</td>
														<td>{{grade.grade}}</td>
														<td>En cours</td>
													</tr>
												{% endfor %}
											</tbody>
										</table>
									</div>

								</div>
							</div>
						</div>
					</div>
				{% endif %}


			</div>
			<!-- CONTAINER CLOSED -->

		</div>
	</div>
{% endblock %}
